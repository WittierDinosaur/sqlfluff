# YML test files are auto-generated from SQL files and should not be edited by
# hand. To help enforce this, the "hash" field in the file must match a hash
# computed by SQLFluff when running the tests. Please run
# `python test/generate_parse_fixture_yml.py`  to generate them after adding or
# altering SQL files.
_hash: 1eabd8d70da7f4c1dfed822abbdb45dc24f199cac9b1d2e87ddfaf7a55459ded
file:
  statement:
    select_statement:
      select_clause:
        keyword: SELECT
        select_clause_element:
          column_reference:
            identifier: SUM
          unparsable:
            bracketed:
            - start_bracket: (
            - raw: CASE
            - raw: WHEN
            - raw: value
            - raw: '!='
            - raw: previous_value
            - raw: THEN
            - raw: '1.0'
            - raw: ELSE
            - raw: '0.0'
            - raw: END
            - end_bracket: )
      from_clause:
        keyword: FROM
        from_expression:
          from_expression_element:
            table_expression:
              bracketed:
                start_bracket: (
                select_statement:
                  select_clause:
                  - keyword: SELECT
                  - select_clause_element:
                      column_reference:
                        identifier: value
                  - comma: ','
                  - select_clause_element:
                      unparsable:
                      - raw: CASE
                      - raw: WHEN
                      - raw: ix
                      - raw: '!='
                      - raw: '0'
                      - raw: THEN
                      - raw: LAG
                      - bracketed:
                          start_bracket: (
                          raw: value
                          end_bracket: )
                      - raw: OVER
                      - bracketed:
                        - start_bracket: (
                        - raw: ORDER
                        - raw: BY
                        - raw: ix
                        - raw: ASC
                        - end_bracket: )
                      - raw: ELSE
                      - raw: value
                      - raw: END
                      - raw: AS
                      - raw: previous_value
                  from_clause:
                    unparsable:
                    - keyword: FROM
                    - raw: UNNEST
                    - bracketed:
                      - start_bracket: (
                      - raw: sequence_validation_and_business_rules
                      - raw: .
                      - raw: sequence_validation_and_business_rules
                      - end_bracket: )
                    - raw: AS
                    - raw: value
                    - raw: WITH
                    - raw: OFFSET
                    - raw: AS
                    - raw: ix
                end_bracket: )
