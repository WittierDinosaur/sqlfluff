# YML test files are auto-generated from SQL files and should not be edited by
# hand. To help enforce this, the "hash" field in the file must match a hash
# computed by SQLFluff when running the tests. Please run
# `python test/generate_parse_fixture_yml.py`  to generate them after adding or
# altering SQL files.
_hash: 3f52aa9025d6dc880ff025eaaaf458326983f57052aae34105b10cfe36146be5
file:
  statement:
    with_compound_statement:
    - keyword: WITH
    - common_table_expression:
        identifier: age_buckets_bit_array
        keyword: AS
        bracketed:
          start_bracket: (
          select_statement:
            select_clause:
            - keyword: SELECT
            - select_clause_element:
                column_reference:
                  identifier: bucket_id
            - comma: ','
            - select_clause_element:
                column_reference:
                  identifier: num_ranges
            - comma: ','
            - select_clause_element:
                column_reference:
                  identifier: min_age
            - comma: ','
            - select_clause_element:
                unparsable:
                - raw: ARRAY
                - bracketed:
                  - start_bracket: (
                  - raw: SELECT
                  - raw: CAST
                  - bracketed:
                    - start_bracket: (
                    - raw: num
                    - raw: AS
                    - raw: INT64
                    - end_bracket: )
                  - raw: FROM
                  - raw: UNNEST
                  - bracketed:
                      start_bracket: (
                      raw: SPLIT
                      bracketed:
                      - start_bracket: (
                      - raw: binary
                      - comma: ','
                      - raw: "''"
                      - end_bracket: )
                      end_bracket: )
                  - raw: AS
                  - raw: num
                  - end_bracket: )
                - raw: AS
                - raw: bits
            - comma: ','
            - select_clause_element:
                column_reference:
                  identifier: age_label
            from_clause:
              keyword: FROM
              from_expression:
                from_expression_element:
                  table_expression:
                    table_reference:
                      identifier: age_buckets
          end_bracket: )
    - comma: ','
    - common_table_expression:
        identifier: bucket_abundance
        keyword: AS
        bracketed:
          start_bracket: (
          select_statement:
            select_clause:
              keyword: SELECT
              select_clause_element:
                column_reference:
                  identifier: bucket_id
                unparsable:
                - bracketed:
                  - start_bracket: (
                  - raw: count_18_24
                  - raw: '*'
                  - raw: bits
                  - start_square_bracket: '['
                  - raw: OFFSET
                  - bracketed:
                      start_bracket: (
                      raw: '0'
                      end_bracket: )
                  - end_square_bracket: ']'
                  - raw: +
                  - raw: count_25_34
                  - raw: '*'
                  - raw: bits
                  - start_square_bracket: '['
                  - raw: OFFSET
                  - bracketed:
                      start_bracket: (
                      raw: '1'
                      end_bracket: )
                  - end_square_bracket: ']'
                  - raw: +
                  - raw: count_35_44
                  - raw: '*'
                  - raw: bits
                  - start_square_bracket: '['
                  - raw: OFFSET
                  - bracketed:
                      start_bracket: (
                      raw: '2'
                      end_bracket: )
                  - end_square_bracket: ']'
                  - raw: +
                  - raw: count_45_54
                  - raw: '*'
                  - raw: bits
                  - start_square_bracket: '['
                  - raw: OFFSET
                  - bracketed:
                      start_bracket: (
                      raw: '3'
                      end_bracket: )
                  - end_square_bracket: ']'
                  - raw: +
                  - raw: count_55_64
                  - raw: '*'
                  - raw: bits
                  - start_square_bracket: '['
                  - raw: OFFSET
                  - bracketed:
                      start_bracket: (
                      raw: '4'
                      end_bracket: )
                  - end_square_bracket: ']'
                  - raw: +
                  - raw: count_65_plus
                  - raw: '*'
                  - raw: bits
                  - start_square_bracket: '['
                  - raw: OFFSET
                  - bracketed:
                      start_bracket: (
                      raw: '5'
                      end_bracket: )
                  - end_square_bracket: ']'
                  - end_bracket: )
                - raw: /
                - raw: audience_size
                - raw: AS
                - raw: relative_abundance
            from_clause:
              keyword: FROM
              from_expression:
                from_expression_element:
                  table_expression:
                    table_reference:
                      identifier: audience_counts_gender_age
                join_clause:
                - keyword: CROSS
                - keyword: JOIN
                - from_expression_element:
                    table_expression:
                      table_reference:
                        identifier: age_buckets_bit_array
          end_bracket: )
    - select_statement:
        select_clause:
          keyword: SELECT
          select_clause_element:
            wildcard_expression:
              wildcard_identifier:
                star: '*'
        from_clause:
          keyword: FROM
          from_expression:
            from_expression_element:
              table_expression:
                table_reference:
                  identifier: age_buckets_bit_array
            join_clause:
            - keyword: JOIN
            - from_expression_element:
                table_expression:
                  table_reference:
                    identifier: bucket_abundance
            - keyword: USING
            - bracketed:
                start_bracket: (
                identifier: bucket_id
                end_bracket: )
